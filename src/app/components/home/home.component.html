<ng-container *ngIf="!isDark; else darkTheme">
  <div class="absolute top-10 left-1/4 animate-flying">
    <img src="/assets/cloud.png">
  </div>
  <div class="absolute top-64 left-1/3 animate-flying">
    <img src="/assets/cloud2.png">
  </div>

  <div class="absolute top-96 left-10 animate-flying">
    <img src="/assets/cloud.png" width="670" height="288">
  </div>

  <div class="absolute bottom-48 right-10 animate-flying">
    <img src="/assets/cloud.png" width="1005" height="432">
  </div>

  <div class="absolute bottom-0 right-1/4 animate-flying">
    <img src="/assets/cloud2.png" width="167">
  </div>
</ng-container>
<ng-template #darkTheme>
  <div class="absolute top-2 left-10 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
    <div class="absolute top-10 left-24 animate-pulse">
      <img src="/assets/stars2.png" width="5">
    </div>
    <div class="absolute top-8 left-32 animate-pulse">
      <img src="/assets/stars1.png" width="10">
    </div>
    <div class="absolute top-24 left-44 animate-pulse">
      <img src="/assets/stars1.png" width="10">
    </div>
  <div class="absolute top-80 left-1/2 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-96 left-1/3 animate-pulse">
    <img src="/assets/stars1.png" width="5">
  </div>
  <div class="absolute top-44 left-2/3 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute top-4 left-1/4 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>

    <div class="absolute top-64 left-12 animate-pulse">
      <img src="/assets/stars2.png" width="10">
    </div>
  <div class="absolute top-1/2 left-24 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
    <div class="absolute top-64 left-32 animate-pulse">
      <img src="/assets/stars2.png" width="10">
    </div>
    <div class="absolute top-1/3 left-44 animate-pulse">
      <img src="/assets/stars2.png" width="10">
    </div>
    <div class="absolute top-64 left-64 animate-pulse">
      <img src="/assets/stars2.png" width="10">
    </div>
    <div class="absolute top-1/4 left-96 animate-pulse">
      <img src="/assets/stars2.png" width="10">
    </div>

  <div class="absolute top-96 left-10 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>

  <div class="absolute bottom-48 right-10 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>

  <div class="absolute bottom-0 right-1/4 animate-pulse">
    <img src="/assets/stars1.png" width="15">
  </div>
  <div class="absolute bottom-0 right-1/4 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>

  <div class="absolute bottom-0 right-2 animate-pulse">
    <img src="/assets/stars1.png" width="15">
  </div>
  <div class="absolute bottom-10 right-12 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>
  <div class="absolute bottom-96 right-36 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute bottom-48 right-64 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute bottom-8 right-1/2 animate-pulse">
    <img src="/assets/stars1.png" width="5">
  </div>
  <div class="absolute bottom-32 right-1/3 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute bottom-1/2 right-2/3 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>
  <div class="absolute bottom-1/4 right-1/4 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute bottom-1/3 right-3/4 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>

  <div class="absolute top-2 right-10 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute top-10 right-24 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>
  <div class="absolute top-8 right-32 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute top-24 right-44 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute top-80 right-1/2 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>

  <div class="absolute top-64 right-12 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-1/2 right-24 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-64 right-32 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-1/3 right-44 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-64 right-64 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute top-1/4 right-96 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>


  <div class="absolute bottom-0 left-2 animate-pulse">
    <img src="/assets/stars1.png" width="15">
  </div>
  <div class="absolute bottom-10 left-12 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>
  <div class="absolute bottom-96 left-36 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute bottom-48 left-64 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute bottom-8 left-1/2 animate-pulse">
    <img src="/assets/stars1.png" width="5">
  </div>
  <div class="absolute bottom-32 left-1/3 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
  <div class="absolute bottom-1/2 left-2/3 animate-pulse">
    <img src="/assets/stars2.png" width="5">
  </div>
  <div class="absolute bottom-1/4 left-1/4 animate-pulse">
    <img src="/assets/stars1.png" width="10">
  </div>
  <div class="absolute bottom-1/3 left-3/4 animate-pulse">
    <img src="/assets/stars2.png" width="10">
  </div>
</ng-template>

<div class=" relative mx-auto my-28 w-2/3 rounded-lg p-8 backdrop-filter backdrop-blur"
     style="background: rgba(240, 249, 255,0.15);box-shadow: 0 8px 32px 0 rgba( 7, 89, 133, 0.37 );">
    <div class="flex flex-col space-y-20">
        <form [formGroup]="searchForm" class="flex justify-end relative">
            <div class="space-y-1">
                <div class="primary-bg-color rounded-md p-2 flex space-x-2">
                    <fa-icon [icon]="search" class="primary-text-color"></fa-icon>
                    <input type="text" formControlName="city" class="primary-text-color primary-bg-color outline-none"
                          placeholder="Enter city ...">
                    <fa-icon [icon]="reset" (click)="resetForm()" class="primary-text-color cursor-pointer"></fa-icon>
                </div>
                <div [hidden]="!showResults" class="absolute primary-bg-color rounded-md"
                     style="box-shadow: 0 8px 32px 0 rgba( 7, 89, 133, 0.37 ); width: 235px;">
                    <div (click)="fetchWeatherForCity(city)" *ngFor="let city of suggestions"
                         class="p-2 rounded-md primary-text-color hover:bg-sky-100 dark:hover:bg-sky-800 cursor-pointer space-y-2">
                        <span class="font-semibold">{{ city.name }}</span>, {{ city.country }}
                    </div>
                </div>
            </div>
        </form>

        <div *ngIf="!isLoading; else loading">
            <div class="space-y-4" *ngIf="city.length > 0; else noCity">
              <div class=" flex justify-between">
                <div class="inline-block  space-x-4 primary-bg-color primary-text-color rounded-md py-2 px-4 text-xl">
                  <fa-icon [icon]="marker" class="primary-text-color text-xl"></fa-icon>
                  <span class="font-semibold">{{ city }} <span *ngIf="country.length > 0">-&nbsp;</span>{{ country }}</span>
                </div>
                <div (click)="setShowDetails()"
                     *ngIf="this.showDetailsService.showDetails$ | async"
                     class="button button-primary">
                  Back
                </div>
              </div>

              <ng-container *ngIf="!(this.showDetailsService.showDetails$ | async); else todayDetails">
                <div>
                  <app-weather-forecast [weatherForecast]="weatherForecast"></app-weather-forecast>
                </div>
              </ng-container>
             <ng-template #todayDetails>
               <div>
                 <app-current-details [current]="weatherForecast.current" [hourly]="weatherForecast.hourly" [alerts]="weatherForecast.alerts"></app-current-details>
               </div>
             </ng-template>
            </div>
            <ng-template #noCity>
                <div class="flex flex-col items-center justify-center space-y-4 primary-bg-color primary-text-color p-4 rounded-md">
                    <div>
                        <fa-icon [icon]="weather" class="text-5xl"></fa-icon>
                    </div>
                    <div class="font-semibold">
                        No current location.
                    </div>
                    <div class="text-center">
                        Please search for a city or allow to use your current location to receive a weather forecast.
                    </div>
                </div>
            </ng-template>
        </div>
        <ng-template #loading>
            <div class="space-y-4 animate-pulse">
                <div *ngFor="let a of [0,1,2]" class="h-12 w-full primary-bg-color rounded-md"></div>
            </div>
        </ng-template>
    </div>
</div>
